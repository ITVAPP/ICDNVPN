{
  // 日志配置
  "log": {
    "loglevel": "error"  // 日志级别：error级别，只记录错误信息
  },
  
  // 统计信息配置
  "stats": {},  // 空对象，启用基础统计功能
  
  // API配置
  "api": {
    "tag": "api",
    "services": ["StatsService"]  // 启用统计服务API
  },
  
  // 本地策略配置
  "policy": {
    "levels": {
      "0": {  // 用户级别0的策略
        "handshake": 5,        // 握手超时时间（秒）
        "connIdle": 300,       // 连接空闲超时时间（秒）
        "uplinkOnly": 2,       // 仅上行连接超时时间（秒）
        "downlinkOnly": 3,     // 仅下行连接超时时间（秒）
        "statsUserUplink": true,   // 启用用户上行流量统计
        "statsUserDownlink": true, // 启用用户下行流量统计
        "bufferSize": 512      // 缓冲区大小（KB）
      }
    },
    "system": {
      "statsInboundUplink": true,    // 启用入站上行流量统计
      "statsInboundDownlink": true,  // 启用入站下行流量统计
      "statsOutboundUplink": true,   // 启用出站上行流量统计
      "statsOutboundDownlink": true  // 启用出站下行流量统计
    }
  },
  
  // 路由配置
  "routing": {
    "domainStrategy": "AsIs",  // 域名解析策略：保持原样
    "rules": [
      {
        // API路由规则
        "type": "field",
        "inboundTag": ["api"],     // 来自API入站的流量
        "outboundTag": "api"       // 路由到API出站
      },
      {
        // 虚拟 DNS：DNS 入站流量路由到 dns-out
        "type": "field",
        "inboundTag": ["dns-in"],
        "outboundTag": "dns-out"
      },
      {
        // 非虚拟 DNS：SOCKS 入站的 DNS 流量（UDP 53）路由到 dns-out
        "type": "field",
        "inboundTag": ["socks"],
        "port": 53,
        "network": "udp",
        "outboundTag": "dns-out"
      },
      {
        // 特定 DNS 服务器通过代理
        "type": "field",
        "outboundTag": "proxy",
        "ip": ["1.1.1.1", "8.8.8.8"],
        "port": 53,
        "network": "udp"
      },
      {
        // 中国大陆域名直连
        "type": "field",
        "outboundTag": "direct",
        "domain": [
          "domain:dns.alidns.com",    // 阿里DNS
          "domain:doh.pub",           // 腾讯DNS
          "domain:dot.pub",           // 腾讯DNS
          "domain:doh.360.cn",        // 360DNS
          "domain:dot.360.cn",        // 360DNS
          "geosite:cn",               // 中国大陆网站
          "geosite:geolocation-cn"    // 中国大陆地理位置网站
        ]
      },
      {
        // 中国大陆 IP 直连
        "type": "field",
        "outboundTag": "direct",
        "ip": [
          "223.5.5.5",      // 阿里DNS
          "223.6.6.6",      // 阿里DNS
          "119.29.29.29",   // 腾讯DNS
          "114.114.114.114", // 114DNS
          "114.114.115.115", // 114DNS
          "geoip:private",   // 私有 IP 地址
          "geoip:cn"         // 中国大陆 IP
        ]
      },
      {
        // 默认规则：其他所有流量通过代理
        "type": "field",
        "port": "0-65535",
        "outboundTag": "proxy"
      }
    ]
  },
  
  // DNS 配置
  "dns": {
    "hosts": {                   // 静态 DNS 映射
      "dns.google": "8.8.8.8",
      "dns.cloudflare.com": "1.1.1.1",
      "cloudflare-dns.com": "1.1.1.1"
    },
    "servers": [
      {
        // 中国大陆域名使用阿里 DNS
        "address": "223.5.5.5",
        "domains": [
          "geosite:cn",           // 中国大陆网站
          "geosite:geolocation-cn" // 中国大陆地理位置网站
        ],
        "expectIPs": [
          "geoip:cn"              // 期望返回中国 IP
        ],
        "skipFallback": false     // 不跳过备用 DNS
      },
      "1.1.1.1",                 // Cloudflare DNS
      "8.8.8.8"                  // Google DNS
    ],
    "disableCache": false,       // 启用 DNS 缓存
    "disableFallback": false     // 启用备用 DNS
  },
  
  // 入站连接配置
  "inbounds": [
    {
      // 虚拟 DNS 入站
      "tag": "dns-in",
      "port": 10853,
      "listen": "127.0.0.1",
      "protocol": "dokodemo-door",
      "settings": {
        "address": "1.1.1.1",
        "port": 53,
        "network": "tcp,udp"
      }
    },
    {
      // SOCKS5 代理服务器
      "tag": "socks",
      "port": 7898,              // 监听端口
      "protocol": "socks",       // SOCKS 协议
      "settings": {
        "auth": "noauth",        // 无需认证
        "udp": true              // 支持 UDP 转发
      }
    },
    {
      // HTTP 代理服务器
      "tag": "http",
      "port": 7899,              // 监听端口
      "protocol": "http",        // HTTP 协议
      "sniffing": {              // 流量探测配置
        "enabled": true,         // 启用探测
        "destOverride": ["http", "tls"], // 探测 HTTP 和 TLS 流量
        "routeOnly": false       // 不仅仅用于路由
      },
      "settings": {
        "auth": "noauth",        // 无需认证
        "udp": true,             // 支持 UDP
        "allowTransparent": false // 不允许透明代理
      }
    },
    {
      // API 管理接口
      "tag": "api",
      "port": 10085,             // API 端口
      "listen": "127.0.0.1",     // 仅本地访问
      "protocol": "dokodemo-door", // 任意门协议
      "settings": {
        "address": "127.0.0.1"   // 目标地址
      }
    }
  ],
  
  // 出站连接配置
  "outbounds": [
    {
      // DNS 出站
      "tag": "dns-out",
      "protocol": "dns"
    },
    {
      // 主代理出站
      "tag": "proxy",
      "protocol": "vless",       // VLESS 协议
      "settings": {
        "vnext": [
          {
            "address": "SERVER_IP",  // 服务器 IP 地址（需要替换为实际 IP）
            "port": 443,             // 服务器端口
            "users": [
              {
                "id": "bc24baea-3e5c-4107-a231-416cf00504fe", // 用户 UUID
                "alterId": 0,        // 额外 ID（VLESS 中为 0）
                "email": "t@t.tt",   // 用户邮箱（标识）
                "security": "auto",  // 加密方式
                "encryption": "none" // VLESS 加密设置
              }
            ]
          }
        ]
      },
      "streamSettings": {
        "network": "ws",           // WebSocket 传输
        "security": "tls",         // TLS 加密
        "tlsSettings": {
          "serverName": "pages-vless-a9f.pages.dev", // TLS 服务器名称
          "allowInsecure": true,  // 不检查远端主机所提供的 TLS 证书的有效性
          "fingerprint": "randomized" // 随机化 TLS 指纹
        },
        "wsSettings": {
          "path": "/",             // WebSocket 路径
          "headers": {
            "Host": "pages-vless-a9f.pages.dev" // Host 头
          }
        },
        "sockopt": {
          "dialerProxy": "proxy3"  // 使用 proxy3 作为底层代理
        }
      },
      "mux": {
        "enabled": false,        // 禁用多路复用
        "concurrency": -1        // 并发连接数
      }
    },
    {
      // 直连出站
      "tag": "direct",
      "protocol": "freedom",     // 自由协议（直连）
      "settings": {}
    },
    {
      // 阻断出站
      "tag": "block",
      "protocol": "blackhole",   // 黑洞协议（阻断）
      "settings": {
        "response": {
          "type": "http"         // 返回 HTTP 响应
        }
      }
    },
    {
      // 辅助代理出站（用于分片）
      "tag": "proxy3",
      "protocol": "freedom",     // 自由协议
      "settings": {
        "fragment": {            // 数据包分片设置
          "packets": "tlshello", // 对 TLS 握手包进行分片
          "length": "200-300",   // 分片长度范围
          "interval": "20-50"    // 分片间隔（毫秒）
        }
      }
    }
  ]
}
